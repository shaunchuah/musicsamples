{% extends "layouts/base.html" %}

{% block title %} Dashboard {% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}
    <div class="row">
      <div class="col-lg-4">
        <div class="card card-chart">
          <div class="card-header">
            <h5 class="card-category">Total Samples</h5>
            <h3 class="card-title"><i class="tim-icons icon-atom"></i> {{ total_samples }} </h3>
          </div>

          
          

        </div>
      </div>

      <div class="col-lg-4">
        <div class="card card-chart">
          <div class="card-header">
            <h5 class="card-category">Monthly Samples Count</h5>
            
          </div>
        <div class="chart-area">          
          <canvas id="monthlysamples"></canvas>
        </div>
      </div>
      </div>

      <div class="col-lg-4">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Sample Database Backup</h3>
          </div>
          <div class="card-body">
            <p>Exports all samples to an excel file. <br /> For custom exports, search and export from the dashboard page.</p>
            
          </div>
          <div class="card-footer">
            <a href="/export_excel_all" class="btn btn-fill btn-success">Export Excel</a>
          </div>
        </div>
      </div>

    </div>
    
    <div class="row">
      
    </div>



{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

  <script>
    $(document).ready(function() {
      var ctx = document.getElementById('monthlysamples').getContext('2d');
      var chart = new Chart(ctx, {
          // The type of chart we want to create
          type: 'line',

          // The data for our dataset
          data: {
              labels: [
              {% for s in samples_by_month %}
                '{{ s.sample_month|date:'M Y' }}',
              {% endfor %}
              ],
              datasets: [{
                  label: 'Monthly Sample Count',
                  fill: false,
                  backgroundColor: 'rgb(0,0,0,0)',
                  borderColor: 'rgb(48, 85, 187)',
                  data: [
                    {% for s in samples_by_month %}
                      {{s.sample_count}},
                    {% endfor %}
                  ]
              }]
          },

          // Configuration options go here
          options: {
            responsive: true,
            //aspectRatio: 5,
            maintainAspectRatio: false,
            scales: {
              yAxes: [{
                  ticks: {
                      beginAtZero: true
                  },
                  gridLines: {
                    display:false
                  },
              }],
              xAxes: [{
                  gridLines: {
                    display:false
                  },
              }]
            },
            legend: {
              display: false,
            },
            layout: {
              padding: {
                left: 20,
                right: 40,
                top: 30,
                bottom: 10,
              },
            },
          }
      });
    });    
  </script>

{% endblock javascripts %}
